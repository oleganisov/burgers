/////////////////////////hamburger menu
const menu_btn = document.querySelector('#menu_btn'),
  ham_menu = document.querySelector('#ham_menu'),
  ham_list = document.querySelector('#ham_list'),
  body = document.querySelector('body');
//функция добавления/удаления активного класса меню и блокировка body
  function toggleMenu(){
    menu_btn.classList.toggle('is-active');
    ham_menu.classList.toggle('is-active');
    body.classList.toggle('is-locked');
  };
//обработчик клика на кнопке меню
menu_btn.addEventListener('click', function (e) {
  e.preventDefault();
  toggleMenu();
});
//обработчик клика на ссылках меню
ham_list.addEventListener('click', function (e) {
  let el=e.target;
  if (el.tagName=='A'){
    toggleMenu();
  };
});
/////////////////////////slider
const slide_next=document.querySelector('#slide-next'),
      slide_prev=document.querySelector('#slide-prev'),
      slide_list=document.querySelector('#slide-list'),
      style=getComputedStyle(slide_list),
      step=parseInt(getComputedStyle(slide_list.firstElementChild).width,10),
      list_width=parseInt(slide_list.children.length,10)*step;
let inAnimate=false;
// устанавливает right; a - текущее значение right, b - шаг сдвига 
function shift_right(a,b){
  slide_list.style.right=a+b+'px';
};
// получает текущее свойство right
function current_right(){
  let cur_right=parseInt(style.right,10);
  if (!cur_right) {
    cur_right=0;
  };
  return cur_right;
};
//обработчик клика по кнопке next
slide_next.addEventListener('click',function(e){
  e.preventDefault();
  if (!inAnimate){
    inAnimate=true;
  let cur_right=current_right();
  if (cur_right<list_width-step){
    shift_right(cur_right,step);
  } 
  else {
    shift_right(0,0);
};
setTimeout(function(){
  inAnimate=false;
},200);
};
});
//обработчик клика по кнопке prev
slide_prev.addEventListener('click',function(e){
  e.preventDefault();
  if (!inAnimate){
    inAnimate=true;
  let  cur_right=current_right();
  if (cur_right>0){
    shift_right(cur_right,-step);
  }
  else {
    shift_right(list_width,-step);
  };
  setTimeout(function(){
    inAnimate=false;
  },200);
};
});
/////////////////////////accordeon team & menu
const team_accord=document.querySelector("#team_accord"),
      menu_accord=document.querySelector("#menu_accord");
// вычисление высоты
function calcHeight(item){
  let pic_h=$(item).find('.team__pic').height();
  let win_w=$(window).width();
  if (win_w<=768){
    result=pic_h*2;
  }else{
    result=pic_h;
  }
  return result;
};
// вычисление ширины
function calcWidth(item){
  let win_w=$(window).width();
  let link_w=$(item).find('a').width();
  let calc_w=win_w-link_w*3;
  return calc_w > 550 ? 550 : calc_w;
};
// вешаем обработчик на ul
function addLsnUl(elem_ul,item_class,expand_class){
  elem_ul.addEventListener('click',function(e){
    e.preventDefault();
    const list_item=elem_ul.querySelectorAll(item_class);

    let activeItem=document.querySelector(item_class+'.is-active');
    let curItem=e.target.closest(item_class);
    list_item.forEach(item=>{
      if (item==activeItem){
        item.classList.remove('is-active');
        if (expand_class=='.accordeon__expand'){
          $(item).find(expand_class).width('0px');
        }else{
          $(item).find(expand_class).outerHeight('0px');
        };
      };
      if (item==curItem&&item!==activeItem){
        item.classList.add('is-active');
        if (expand_class=='.accordeon__expand'){
          $(item).find(expand_class).width(calcWidth(item));
        }
        else{
          $(item).find(expand_class).height(calcHeight(item));
        };
    };
  });
  });
};

addLsnUl(team_accord,'.team__item','.team__expand');
addLsnUl(menu_accord,'.accordeon__item','.accordeon__expand');

// модуль overlay
const modal=document.querySelector('#modal');
const modal_inner=document.querySelector('#modal_inner');
const template = document.querySelector("#overlayTemplate").innerHTML;
const review_btns=document.querySelectorAll('.reviews__btn');
const overlay = createOverlay(template);
// установка прослушивателя кликов на кнопках отзывов
review_btns.forEach(rev_btn => {
  rev_btn.addEventListener('click',function(e){
  e.preventDefault();
  let rev_text=rev_btn.previousElementSibling.textContent;
  let rev_tittle=rev_btn.previousElementSibling.previousElementSibling.textContent;
  overlay.open();
  overlay.setContent(rev_tittle,rev_text);
});
});
//функция создания оверлея
function createOverlay(template) {
  let fragment = document.createElement('div');

  fragment.innerHTML = template;

  const overlayElement = fragment.querySelector(".overlay");
  const contentTittle = fragment.querySelector("#tittle_mod");
  const contentText = fragment.querySelector("#text_mod");
  const closeBtn = fragment.querySelector("#close_btn");
  
  fragment = null;
// установка прослушивателя кликов на кнопке закрытия оверлея
closeBtn.addEventListener("click", function(e) {
  e.preventDefault();
  modal_inner.removeChild(overlayElement);
  modal.classList.remove('is-active');
  body.classList.remove('is-locked');
});
let open=function(){
  modal_inner.appendChild(overlayElement);
  modal.classList.add('is-active');
  body.classList.add('is-locked');
};
let close=function(){
  closeBtn.click;
};
let setContent=function(tittle_mod,text_mod){
  contentText.innerHTML = text_mod;
  contentTittle.innerHTML = tittle_mod;
};
  return {
    open,
    close,
    setContent
  };
};

/////////////////////////form data

let formOrder=function(){
const form_order=document.querySelector('#form_order');

  form_order.addEventListener('submit',function(e){
  e.preventDefault();
  const formData = new FormData(),
  
  xhr = new XMLHttpRequest();
  xhr.resposeType='json';
  xhr.open("POST", "https://webdev-api.loftschool.com/sendmail");
  xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");

  formData.append('name',form_order.elements.firstname.value);
  formData.append('phone',form_order.elements.phone.value);
  formData.append('comment',form_order.elements.comment.value);
  formData.append('to','my@valid.em');
  
  xhr.send(formData);
  xhr.onload  = function() {
    let jsonResponse = JSON.parse(xhr.responseText);
    
    if (xhr.status!=200){
      overlay.setContent('Ошибка','Произошла ошибка отправки данных');
    } else {
      overlay.setContent('Сообщение',jsonResponse.message);
    }
    overlay.open();
 };
});
};
formOrder();
// отображение ингридиентов по mouseover/mouseout
let mouseMove=function(){
const recipes=document.querySelectorAll('.recipe');

function recipeMouseOver(){
  $('.recipe__dropdown').css({'left':'100%','opacity':1});
  $('.recipe').css('background-color','rgba(227, 80, 40, 1)');
};
function recipeMouseOut(){
  $('.recipe__dropdown').css({'left':'-9999px','opacity':0});
  $('.recipe').css('background-color','rgba(227, 80, 40, 0.4)');
};

recipes.forEach(recipe =>{
  recipe.addEventListener('mouseover',function(e){
    recipeMouseOver();
  });
  recipe.addEventListener('mouseout',function(e){
    recipeMouseOut();
  });
});
};
mouseMove();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9oYW1idXJnZXIgbWVudVxyXG5jb25zdCBtZW51X2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51X2J0bicpLFxyXG4gIGhhbV9tZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hhbV9tZW51JyksXHJcbiAgaGFtX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGFtX2xpc3QnKSxcclxuICBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4vL9GE0YPQvdC60YbQuNGPINC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0LDQutGC0LjQstC90L7Qs9C+INC60LvQsNGB0YHQsCDQvNC10L3RjiDQuCDQsdC70L7QutC40YDQvtCy0LrQsCBib2R5XHJcbiAgZnVuY3Rpb24gdG9nZ2xlTWVudSgpe1xyXG4gICAgbWVudV9idG4uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcbiAgICBoYW1fbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtbG9ja2VkJyk7XHJcbiAgfTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC90LAg0LrQvdC+0L/QutC1INC80LXQvdGOXHJcbm1lbnVfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgdG9nZ2xlTWVudSgpO1xyXG59KTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC90LAg0YHRgdGL0LvQutCw0YUg0LzQtdC90Y5cclxuaGFtX2xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIGxldCBlbD1lLnRhcmdldDtcclxuICBpZiAoZWwudGFnTmFtZT09J0EnKXtcclxuICAgIHRvZ2dsZU1lbnUoKTtcclxuICB9O1xyXG59KTtcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3NsaWRlclxyXG5jb25zdCBzbGlkZV9uZXh0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZS1uZXh0JyksXHJcbiAgICAgIHNsaWRlX3ByZXY9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NsaWRlLXByZXYnKSxcclxuICAgICAgc2xpZGVfbGlzdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2xpZGUtbGlzdCcpLFxyXG4gICAgICBzdHlsZT1nZXRDb21wdXRlZFN0eWxlKHNsaWRlX2xpc3QpLFxyXG4gICAgICBzdGVwPXBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoc2xpZGVfbGlzdC5maXJzdEVsZW1lbnRDaGlsZCkud2lkdGgsMTApLFxyXG4gICAgICBsaXN0X3dpZHRoPXBhcnNlSW50KHNsaWRlX2xpc3QuY2hpbGRyZW4ubGVuZ3RoLDEwKSpzdGVwO1xyXG5sZXQgaW5BbmltYXRlPWZhbHNlO1xyXG4vLyDRg9GB0YLQsNC90LDQstC70LjQstCw0LXRgiByaWdodDsgYSAtINGC0LXQutGD0YnQtdC1INC30L3QsNGH0LXQvdC40LUgcmlnaHQsIGIgLSDRiNCw0LMg0YHQtNCy0LjQs9CwIFxyXG5mdW5jdGlvbiBzaGlmdF9yaWdodChhLGIpe1xyXG4gIHNsaWRlX2xpc3Quc3R5bGUucmlnaHQ9YStiKydweCc7XHJcbn07XHJcbi8vINC/0L7Qu9GD0YfQsNC10YIg0YLQtdC60YPRidC10LUg0YHQstC+0LnRgdGC0LLQviByaWdodFxyXG5mdW5jdGlvbiBjdXJyZW50X3JpZ2h0KCl7XHJcbiAgbGV0IGN1cl9yaWdodD1wYXJzZUludChzdHlsZS5yaWdodCwxMCk7XHJcbiAgaWYgKCFjdXJfcmlnaHQpIHtcclxuICAgIGN1cl9yaWdodD0wO1xyXG4gIH07XHJcbiAgcmV0dXJuIGN1cl9yaWdodDtcclxufTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1IG5leHRcclxuc2xpZGVfbmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGlmICghaW5BbmltYXRlKXtcclxuICAgIGluQW5pbWF0ZT10cnVlO1xyXG4gIGxldCBjdXJfcmlnaHQ9Y3VycmVudF9yaWdodCgpO1xyXG4gIGlmIChjdXJfcmlnaHQ8bGlzdF93aWR0aC1zdGVwKXtcclxuICAgIHNoaWZ0X3JpZ2h0KGN1cl9yaWdodCxzdGVwKTtcclxuICB9IFxyXG4gIGVsc2Uge1xyXG4gICAgc2hpZnRfcmlnaHQoMCwwKTtcclxufTtcclxuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gIGluQW5pbWF0ZT1mYWxzZTtcclxufSwyMDApO1xyXG59O1xyXG59KTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1IHByZXZcclxuc2xpZGVfcHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGlmICghaW5BbmltYXRlKXtcclxuICAgIGluQW5pbWF0ZT10cnVlO1xyXG4gIGxldCAgY3VyX3JpZ2h0PWN1cnJlbnRfcmlnaHQoKTtcclxuICBpZiAoY3VyX3JpZ2h0PjApe1xyXG4gICAgc2hpZnRfcmlnaHQoY3VyX3JpZ2h0LC1zdGVwKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBzaGlmdF9yaWdodChsaXN0X3dpZHRoLC1zdGVwKTtcclxuICB9O1xyXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIGluQW5pbWF0ZT1mYWxzZTtcclxuICB9LDIwMCk7XHJcbn07XHJcbn0pO1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vYWNjb3JkZW9uIHRlYW0gJiBtZW51XHJcbmNvbnN0IHRlYW1fYWNjb3JkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVhbV9hY2NvcmRcIiksXHJcbiAgICAgIG1lbnVfYWNjb3JkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVudV9hY2NvcmRcIik7XHJcbi8vINCy0YvRh9C40YHQu9C10L3QuNC1INCy0YvRgdC+0YLRi1xyXG5mdW5jdGlvbiBjYWxjSGVpZ2h0KGl0ZW0pe1xyXG4gIGxldCBwaWNfaD0kKGl0ZW0pLmZpbmQoJy50ZWFtX19waWMnKS5oZWlnaHQoKTtcclxuICBsZXQgd2luX3c9JCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgaWYgKHdpbl93PD03Njgpe1xyXG4gICAgcmVzdWx0PXBpY19oKjI7XHJcbiAgfWVsc2V7XHJcbiAgICByZXN1bHQ9cGljX2g7XHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbi8vINCy0YvRh9C40YHQu9C10L3QuNC1INGI0LjRgNC40L3Ri1xyXG5mdW5jdGlvbiBjYWxjV2lkdGgoaXRlbSl7XHJcbiAgbGV0IHdpbl93PSQod2luZG93KS53aWR0aCgpO1xyXG4gIGxldCBsaW5rX3c9JChpdGVtKS5maW5kKCdhJykud2lkdGgoKTtcclxuICBsZXQgY2FsY193PXdpbl93LWxpbmtfdyozO1xyXG4gIHJldHVybiBjYWxjX3cgPiA1NTAgPyA1NTAgOiBjYWxjX3c7XHJcbn07XHJcbi8vINCy0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvdCwIHVsXHJcbmZ1bmN0aW9uIGFkZExzblVsKGVsZW1fdWwsaXRlbV9jbGFzcyxleHBhbmRfY2xhc3Mpe1xyXG4gIGVsZW1fdWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgbGlzdF9pdGVtPWVsZW1fdWwucXVlcnlTZWxlY3RvckFsbChpdGVtX2NsYXNzKTtcclxuXHJcbiAgICBsZXQgYWN0aXZlSXRlbT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGl0ZW1fY2xhc3MrJy5pcy1hY3RpdmUnKTtcclxuICAgIGxldCBjdXJJdGVtPWUudGFyZ2V0LmNsb3Nlc3QoaXRlbV9jbGFzcyk7XHJcbiAgICBsaXN0X2l0ZW0uZm9yRWFjaChpdGVtPT57XHJcbiAgICAgIGlmIChpdGVtPT1hY3RpdmVJdGVtKXtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIGlmIChleHBhbmRfY2xhc3M9PScuYWNjb3JkZW9uX19leHBhbmQnKXtcclxuICAgICAgICAgICQoaXRlbSkuZmluZChleHBhbmRfY2xhc3MpLndpZHRoKCcwcHgnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICQoaXRlbSkuZmluZChleHBhbmRfY2xhc3MpLm91dGVySGVpZ2h0KCcwcHgnKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgICBpZiAoaXRlbT09Y3VySXRlbSYmaXRlbSE9PWFjdGl2ZUl0ZW0pe1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgaWYgKGV4cGFuZF9jbGFzcz09Jy5hY2NvcmRlb25fX2V4cGFuZCcpe1xyXG4gICAgICAgICAgJChpdGVtKS5maW5kKGV4cGFuZF9jbGFzcykud2lkdGgoY2FsY1dpZHRoKGl0ZW0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICQoaXRlbSkuZmluZChleHBhbmRfY2xhc3MpLmhlaWdodChjYWxjSGVpZ2h0KGl0ZW0pKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmFkZExzblVsKHRlYW1fYWNjb3JkLCcudGVhbV9faXRlbScsJy50ZWFtX19leHBhbmQnKTtcclxuYWRkTHNuVWwobWVudV9hY2NvcmQsJy5hY2NvcmRlb25fX2l0ZW0nLCcuYWNjb3JkZW9uX19leHBhbmQnKTtcclxuXHJcbi8vINC80L7QtNGD0LvRjCBvdmVybGF5XHJcbmNvbnN0IG1vZGFsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpO1xyXG5jb25zdCBtb2RhbF9pbm5lcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxfaW5uZXInKTtcclxuY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlUZW1wbGF0ZVwiKS5pbm5lckhUTUw7XHJcbmNvbnN0IHJldmlld19idG5zPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZpZXdzX19idG4nKTtcclxuY29uc3Qgb3ZlcmxheSA9IGNyZWF0ZU92ZXJsYXkodGVtcGxhdGUpO1xyXG4vLyDRg9GB0YLQsNC90L7QstC60LAg0L/RgNC+0YHQu9GD0YjQuNCy0LDRgtC10LvRjyDQutC70LjQutC+0LIg0L3QsCDQutC90L7Qv9C60LDRhSDQvtGC0LfRi9Cy0L7QslxyXG5yZXZpZXdfYnRucy5mb3JFYWNoKHJldl9idG4gPT4ge1xyXG4gIHJldl9idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpe1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBsZXQgcmV2X3RleHQ9cmV2X2J0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50O1xyXG4gIGxldCByZXZfdGl0dGxlPXJldl9idG4ucHJldmlvdXNFbGVtZW50U2libGluZy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50O1xyXG4gIG92ZXJsYXkub3BlbigpO1xyXG4gIG92ZXJsYXkuc2V0Q29udGVudChyZXZfdGl0dGxlLHJldl90ZXh0KTtcclxufSk7XHJcbn0pO1xyXG4vL9GE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0L7QstC10YDQu9C10Y9cclxuZnVuY3Rpb24gY3JlYXRlT3ZlcmxheSh0ZW1wbGF0ZSkge1xyXG4gIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICBmcmFnbWVudC5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcclxuXHJcbiAgY29uc3Qgb3ZlcmxheUVsZW1lbnQgPSBmcmFnbWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbiAgY29uc3QgY29udGVudFRpdHRsZSA9IGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0dGxlX21vZFwiKTtcclxuICBjb25zdCBjb250ZW50VGV4dCA9IGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGV4dF9tb2RcIik7XHJcbiAgY29uc3QgY2xvc2VCdG4gPSBmcmFnbWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlX2J0blwiKTtcclxuICBcclxuICBmcmFnbWVudCA9IG51bGw7XHJcbi8vINGD0YHRgtCw0L3QvtCy0LrQsCDQv9GA0L7RgdC70YPRiNC40LLQsNGC0LXQu9GPINC60LvQuNC60L7QsiDQvdCwINC60L3QvtC/0LrQtSDQt9Cw0LrRgNGL0YLQuNGPINC+0LLQtdGA0LvQtdGPXHJcbmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIG1vZGFsX2lubmVyLnJlbW92ZUNoaWxkKG92ZXJsYXlFbGVtZW50KTtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvY2tlZCcpO1xyXG59KTtcclxubGV0IG9wZW49ZnVuY3Rpb24oKXtcclxuICBtb2RhbF9pbm5lci5hcHBlbmRDaGlsZChvdmVybGF5RWxlbWVudCk7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1sb2NrZWQnKTtcclxufTtcclxubGV0IGNsb3NlPWZ1bmN0aW9uKCl7XHJcbiAgY2xvc2VCdG4uY2xpY2s7XHJcbn07XHJcbmxldCBzZXRDb250ZW50PWZ1bmN0aW9uKHRpdHRsZV9tb2QsdGV4dF9tb2Qpe1xyXG4gIGNvbnRlbnRUZXh0LmlubmVySFRNTCA9IHRleHRfbW9kO1xyXG4gIGNvbnRlbnRUaXR0bGUuaW5uZXJIVE1MID0gdGl0dGxlX21vZDtcclxufTtcclxuICByZXR1cm4ge1xyXG4gICAgb3BlbixcclxuICAgIGNsb3NlLFxyXG4gICAgc2V0Q29udGVudFxyXG4gIH07XHJcbn07XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vZm9ybSBkYXRhXHJcblxyXG5sZXQgZm9ybU9yZGVyPWZ1bmN0aW9uKCl7XHJcbmNvbnN0IGZvcm1fb3JkZXI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1fb3JkZXInKTtcclxuXHJcbiAgZm9ybV9vcmRlci5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLGZ1bmN0aW9uKGUpe1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpLFxyXG4gIFxyXG4gIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gIHhoci5yZXNwb3NlVHlwZT0nanNvbic7XHJcbiAgeGhyLm9wZW4oXCJQT1NUXCIsIFwiaHR0cHM6Ly93ZWJkZXYtYXBpLmxvZnRzY2hvb2wuY29tL3NlbmRtYWlsXCIpO1xyXG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1SZXF1ZXN0ZWQtV2l0aFwiLCBcIlhNTEh0dHBSZXF1ZXN0XCIpO1xyXG5cclxuICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLGZvcm1fb3JkZXIuZWxlbWVudHMuZmlyc3RuYW1lLnZhbHVlKTtcclxuICBmb3JtRGF0YS5hcHBlbmQoJ3Bob25lJyxmb3JtX29yZGVyLmVsZW1lbnRzLnBob25lLnZhbHVlKTtcclxuICBmb3JtRGF0YS5hcHBlbmQoJ2NvbW1lbnQnLGZvcm1fb3JkZXIuZWxlbWVudHMuY29tbWVudC52YWx1ZSk7XHJcbiAgZm9ybURhdGEuYXBwZW5kKCd0bycsJ215QHZhbGlkLmVtJyk7XHJcbiAgXHJcbiAgeGhyLnNlbmQoZm9ybURhdGEpO1xyXG4gIHhoci5vbmxvYWQgID0gZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQganNvblJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgIFxyXG4gICAgaWYgKHhoci5zdGF0dXMhPTIwMCl7XHJcbiAgICAgIG92ZXJsYXkuc2V0Q29udGVudCgn0J7RiNC40LHQutCwJywn0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INC00LDQvdC90YvRhScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb3ZlcmxheS5zZXRDb250ZW50KCfQodC+0L7QsdGJ0LXQvdC40LUnLGpzb25SZXNwb25zZS5tZXNzYWdlKTtcclxuICAgIH1cclxuICAgIG92ZXJsYXkub3BlbigpO1xyXG4gfTtcclxufSk7XHJcbn07XHJcbmZvcm1PcmRlcigpO1xyXG4vLyDQvtGC0L7QsdGA0LDQttC10L3QuNC1INC40L3Qs9GA0LjQtNC40LXQvdGC0L7QsiDQv9C+IG1vdXNlb3Zlci9tb3VzZW91dFxyXG5sZXQgbW91c2VNb3ZlPWZ1bmN0aW9uKCl7XHJcbmNvbnN0IHJlY2lwZXM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlY2lwZScpO1xyXG5cclxuZnVuY3Rpb24gcmVjaXBlTW91c2VPdmVyKCl7XHJcbiAgJCgnLnJlY2lwZV9fZHJvcGRvd24nKS5jc3MoeydsZWZ0JzonMTAwJScsJ29wYWNpdHknOjF9KTtcclxuICAkKCcucmVjaXBlJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywncmdiYSgyMjcsIDgwLCA0MCwgMSknKTtcclxufTtcclxuZnVuY3Rpb24gcmVjaXBlTW91c2VPdXQoKXtcclxuICAkKCcucmVjaXBlX19kcm9wZG93bicpLmNzcyh7J2xlZnQnOictOTk5OXB4Jywnb3BhY2l0eSc6MH0pO1xyXG4gICQoJy5yZWNpcGUnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCdyZ2JhKDIyNywgODAsIDQwLCAwLjQpJyk7XHJcbn07XHJcblxyXG5yZWNpcGVzLmZvckVhY2gocmVjaXBlID0+e1xyXG4gIHJlY2lwZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGZ1bmN0aW9uKGUpe1xyXG4gICAgcmVjaXBlTW91c2VPdmVyKCk7XHJcbiAgfSk7XHJcbiAgcmVjaXBlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JyxmdW5jdGlvbihlKXtcclxuICAgIHJlY2lwZU1vdXNlT3V0KCk7XHJcbiAgfSk7XHJcbn0pO1xyXG59O1xyXG5tb3VzZU1vdmUoKTtcclxuXHJcbiJdfQ==
