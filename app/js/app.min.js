/////////////////////////hamburger menu
const menu_btn = document.querySelector('#menu_btn'),
  ham_menu = document.querySelector('#ham_menu'),
  ham_list = document.querySelector('#ham_list'),
  body = document.querySelector('body');
//функция добавления/удаления активного класса меню и блокировка body
  function toggleMenu(){
    menu_btn.classList.toggle('is-active');
    ham_menu.classList.toggle('is-active');
    body.classList.toggle('is-locked');
  };
//обработчик клика на кнопке меню
menu_btn.addEventListener('click', function (e) {
  e.preventDefault();
  toggleMenu();
});
//обработчик клика на ссылках меню
ham_list.addEventListener('click', function (e) {
  let el=e.target;
  if (el.tagName=='A'){
    toggleMenu();
  };
});
/////////////////////////slider
const slide_next=document.querySelector('#slide-next'),
      slide_prev=document.querySelector('#slide-prev'),
      slide_list=document.querySelector('#slide-list'),
      style=getComputedStyle(slide_list),
      step=parseInt(getComputedStyle(slide_list.firstElementChild).width,10),
      list_width=parseInt(slide_list.children.length,10)*step;
let inAnimate=false;
// устанавливает right; a - текущее значение right, b - шаг сдвига 
function shift_right(a,b){
  slide_list.style.right=a+b+'px';
};
// получает текущее свойство right
function current_right(){
  let cur_right=parseInt(style.right,10);
  if (!cur_right) {
    cur_right=0;
  };
  return cur_right;
};
//обработчик клика по кнопке next
slide_next.addEventListener('click',function(e){
  e.preventDefault();
  if (!inAnimate){
    inAnimate=true;
  let cur_right=current_right();
  if (cur_right<list_width-step){
    shift_right(cur_right,step);
  } 
  else {
    shift_right(0,0);
};
setTimeout(function(){
  inAnimate=false;
},200);
};
});
//обработчик клика по кнопке prev
slide_prev.addEventListener('click',function(e){
  e.preventDefault();
  if (!inAnimate){
    inAnimate=true;
  let  cur_right=current_right();
  if (cur_right>0){
    shift_right(cur_right,-step);
  }
  else {
    shift_right(list_width,-step);
  };
  setTimeout(function(){
    inAnimate=false;
  },200);
};
});
/////////////////////////accordeon team & menu
const team_accord=document.querySelector("#team_accord"),
      menu_accord=document.querySelector("#menu_accord");
// вычисление высоты
function calcHeight(item){
  let pic_h=$(item).find('.team__pic').height();
  let win_w=$(window).width();
  if (win_w<=768){
    result=pic_h*2;
  }else{
    result=pic_h;
  }
  return result;
};
// вычисление ширины
function calcWidth(item){
  let win_w=$(window).width();
  let link_w=$(item).find('a').width();
  let calc_w=win_w-link_w*3;
  return calc_w > 550 ? 550 : calc_w;
};
// вешаем обработчик на ul
function addLsnUl(elem_ul,item_class,expand_class){
  elem_ul.addEventListener('click',function(e){
    e.preventDefault();
    const list_item=elem_ul.querySelectorAll(item_class);

    let activeItem=document.querySelector(item_class+'.is-active');
    let curItem=e.target.closest(item_class);
    list_item.forEach(item=>{
      if (item==activeItem){
        item.classList.remove('is-active');
        if (expand_class=='.accordeon__expand'){
          $(item).find(expand_class).width('0px');
        }else{
          $(item).find(expand_class).height('0px');
        };
      };
      if (item==curItem&&item!==activeItem){
        item.classList.add('is-active');
        if (expand_class=='.accordeon__expand'){
          $(item).find(expand_class).width(calcWidth(item));
        }
        else{
          $(item).find(expand_class).height(calcHeight(item));
        };
    };
  });
  });
};

addLsnUl(team_accord,'.team__item','.team__expand');
addLsnUl(menu_accord,'.accordeon__item','.accordeon__expand');

// модуль overlay
const modal=document.querySelector('#modal');
const modal_inner=document.querySelector('#modal_inner');
const template = document.querySelector("#overlayTemplate").innerHTML;
const review_btns=document.querySelectorAll('.reviews__btn');
const overlay = createOverlay(template);
// установка прослушивателя кликов на кнопках отзывов
review_btns.forEach(rev_btn => {
  rev_btn.addEventListener('click',function(e){
  e.preventDefault();
  let rev_text=rev_btn.previousElementSibling.textContent;
  let rev_tittle=rev_btn.previousElementSibling.previousElementSibling.textContent;
  overlay.open();
  overlay.setContent(rev_tittle,rev_text);
});
});
//функция создания оверлея
function createOverlay(template) {
  let fragment = document.createElement('div');

  fragment.innerHTML = template;

  const overlayElement = fragment.querySelector(".overlay");
  const contentTittle = fragment.querySelector("#tittle_mod");
  const contentText = fragment.querySelector("#text_mod");
  const closeBtn = fragment.querySelector("#close_btn");
  
  fragment = null;
// установка прослушивателя кликов на кнопке закрытия оверлея
closeBtn.addEventListener("click", function(e) {
  e.preventDefault();
  modal_inner.removeChild(overlayElement);
  modal.classList.remove('is-active');
  body.classList.remove('is-locked');
});
let open=function(){
  modal_inner.appendChild(overlayElement);
  modal.classList.add('is-active');
  body.classList.add('is-locked');
};
let close=function(){
  closeBtn.click;
};
let setContent=function(tittle_mod,text_mod){
  contentText.innerHTML = text_mod;
  contentTittle.innerHTML = tittle_mod;
};
  return {
    open,
    close,
    setContent
  };
};

/////////////////////////form data

let formOrder=function(){
const form_order=document.querySelector('#form_order');

  form_order.addEventListener('submit',function(e){
  e.preventDefault();
  const formData = new FormData(),
  
  xhr = new XMLHttpRequest();
  xhr.resposeType='json';
  xhr.open("POST", "https://webdev-api.loftschool.com/sendmail");
  xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");

  formData.append('name',form_order.elements.firstname.value);
  formData.append('phone',form_order.elements.phone.value);
  formData.append('comment',form_order.elements.comment.value);
  formData.append('to','my@valid.em');
  
  xhr.send(formData);
  xhr.onload  = function() {
    let jsonResponse = JSON.parse(xhr.responseText);
    
    if (xhr.status!=200){
      overlay.setContent('Ошибка','Произошла ошибка отправки данных');
    } else {
      overlay.setContent('Сообщение',jsonResponse.message);
    }
    overlay.open();
 };
});
};
formOrder();
// отображение ингридиентов по mouseover/mouseout
let mouseMove=function(){
const recipes=document.querySelectorAll('.recipe');

function recipeMouseOver(){
  $('.recipe__dropdown').css({'left':'100%','opacity':1});
  $('.recipe').css('background-color','rgba(227, 80, 40, 1)');
};
function recipeMouseOut(){
  $('.recipe__dropdown').css({'left':'-9999px','opacity':0});
  $('.recipe').css('background-color','rgba(227, 80, 40, 0.4)');
};

recipes.forEach(recipe =>{
  recipe.addEventListener('mouseover',function(e){
    recipeMouseOver();
  });
  recipe.addEventListener('mouseout',function(e){
    recipeMouseOut();
  });
});
};
mouseMove();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9oYW1idXJnZXIgbWVudVxyXG5jb25zdCBtZW51X2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51X2J0bicpLFxyXG4gIGhhbV9tZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hhbV9tZW51JyksXHJcbiAgaGFtX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGFtX2xpc3QnKSxcclxuICBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4vL9GE0YPQvdC60YbQuNGPINC00L7QsdCw0LLQu9C10L3QuNGPL9GD0LTQsNC70LXQvdC40Y8g0LDQutGC0LjQstC90L7Qs9C+INC60LvQsNGB0YHQsCDQvNC10L3RjiDQuCDQsdC70L7QutC40YDQvtCy0LrQsCBib2R5XHJcbiAgZnVuY3Rpb24gdG9nZ2xlTWVudSgpe1xyXG4gICAgbWVudV9idG4uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcbiAgICBoYW1fbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcclxuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtbG9ja2VkJyk7XHJcbiAgfTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC90LAg0LrQvdC+0L/QutC1INC80LXQvdGOXHJcbm1lbnVfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgdG9nZ2xlTWVudSgpO1xyXG59KTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC90LAg0YHRgdGL0LvQutCw0YUg0LzQtdC90Y5cclxuaGFtX2xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIGxldCBlbD1lLnRhcmdldDtcclxuICBpZiAoZWwudGFnTmFtZT09J0EnKXtcclxuICAgIHRvZ2dsZU1lbnUoKTtcclxuICB9O1xyXG59KTtcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3NsaWRlclxyXG5jb25zdCBzbGlkZV9uZXh0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZS1uZXh0JyksXHJcbiAgICAgIHNsaWRlX3ByZXY9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NsaWRlLXByZXYnKSxcclxuICAgICAgc2xpZGVfbGlzdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2xpZGUtbGlzdCcpLFxyXG4gICAgICBzdHlsZT1nZXRDb21wdXRlZFN0eWxlKHNsaWRlX2xpc3QpLFxyXG4gICAgICBzdGVwPXBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoc2xpZGVfbGlzdC5maXJzdEVsZW1lbnRDaGlsZCkud2lkdGgsMTApLFxyXG4gICAgICBsaXN0X3dpZHRoPXBhcnNlSW50KHNsaWRlX2xpc3QuY2hpbGRyZW4ubGVuZ3RoLDEwKSpzdGVwO1xyXG5sZXQgaW5BbmltYXRlPWZhbHNlO1xyXG4vLyDRg9GB0YLQsNC90LDQstC70LjQstCw0LXRgiByaWdodDsgYSAtINGC0LXQutGD0YnQtdC1INC30L3QsNGH0LXQvdC40LUgcmlnaHQsIGIgLSDRiNCw0LMg0YHQtNCy0LjQs9CwIFxyXG5mdW5jdGlvbiBzaGlmdF9yaWdodChhLGIpe1xyXG4gIHNsaWRlX2xpc3Quc3R5bGUucmlnaHQ9YStiKydweCc7XHJcbn07XHJcbi8vINC/0L7Qu9GD0YfQsNC10YIg0YLQtdC60YPRidC10LUg0YHQstC+0LnRgdGC0LLQviByaWdodFxyXG5mdW5jdGlvbiBjdXJyZW50X3JpZ2h0KCl7XHJcbiAgbGV0IGN1cl9yaWdodD1wYXJzZUludChzdHlsZS5yaWdodCwxMCk7XHJcbiAgaWYgKCFjdXJfcmlnaHQpIHtcclxuICAgIGN1cl9yaWdodD0wO1xyXG4gIH07XHJcbiAgcmV0dXJuIGN1cl9yaWdodDtcclxufTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1IG5leHRcclxuc2xpZGVfbmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGlmICghaW5BbmltYXRlKXtcclxuICAgIGluQW5pbWF0ZT10cnVlO1xyXG4gIGxldCBjdXJfcmlnaHQ9Y3VycmVudF9yaWdodCgpO1xyXG4gIGlmIChjdXJfcmlnaHQ8bGlzdF93aWR0aC1zdGVwKXtcclxuICAgIHNoaWZ0X3JpZ2h0KGN1cl9yaWdodCxzdGVwKTtcclxuICB9IFxyXG4gIGVsc2Uge1xyXG4gICAgc2hpZnRfcmlnaHQoMCwwKTtcclxufTtcclxuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gIGluQW5pbWF0ZT1mYWxzZTtcclxufSwyMDApO1xyXG59O1xyXG59KTtcclxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1IHByZXZcclxuc2xpZGVfcHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGlmICghaW5BbmltYXRlKXtcclxuICAgIGluQW5pbWF0ZT10cnVlO1xyXG4gIGxldCAgY3VyX3JpZ2h0PWN1cnJlbnRfcmlnaHQoKTtcclxuICBpZiAoY3VyX3JpZ2h0PjApe1xyXG4gICAgc2hpZnRfcmlnaHQoY3VyX3JpZ2h0LC1zdGVwKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBzaGlmdF9yaWdodChsaXN0X3dpZHRoLC1zdGVwKTtcclxuICB9O1xyXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIGluQW5pbWF0ZT1mYWxzZTtcclxuICB9LDIwMCk7XHJcbn07XHJcbn0pO1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vYWNjb3JkZW9uIHRlYW0gJiBtZW51XHJcbmNvbnN0IHRlYW1fYWNjb3JkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVhbV9hY2NvcmRcIiksXHJcbiAgICAgIG1lbnVfYWNjb3JkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVudV9hY2NvcmRcIik7XHJcbi8vINCy0YvRh9C40YHQu9C10L3QuNC1INCy0YvRgdC+0YLRi1xyXG5mdW5jdGlvbiBjYWxjSGVpZ2h0KGl0ZW0pe1xyXG4gIGxldCBwaWNfaD0kKGl0ZW0pLmZpbmQoJy50ZWFtX19waWMnKS5oZWlnaHQoKTtcclxuICBsZXQgd2luX3c9JCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgaWYgKHdpbl93PD03Njgpe1xyXG4gICAgcmVzdWx0PXBpY19oKjI7XHJcbiAgfWVsc2V7XHJcbiAgICByZXN1bHQ9cGljX2g7XHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbi8vINCy0YvRh9C40YHQu9C10L3QuNC1INGI0LjRgNC40L3Ri1xyXG5mdW5jdGlvbiBjYWxjV2lkdGgoaXRlbSl7XHJcbiAgbGV0IHdpbl93PSQod2luZG93KS53aWR0aCgpO1xyXG4gIGxldCBsaW5rX3c9JChpdGVtKS5maW5kKCdhJykud2lkdGgoKTtcclxuICBsZXQgY2FsY193PXdpbl93LWxpbmtfdyozO1xyXG4gIHJldHVybiBjYWxjX3cgPiA1NTAgPyA1NTAgOiBjYWxjX3c7XHJcbn07XHJcbi8vINCy0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvdCwIHVsXHJcbmZ1bmN0aW9uIGFkZExzblVsKGVsZW1fdWwsaXRlbV9jbGFzcyxleHBhbmRfY2xhc3Mpe1xyXG4gIGVsZW1fdWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgbGlzdF9pdGVtPWVsZW1fdWwucXVlcnlTZWxlY3RvckFsbChpdGVtX2NsYXNzKTtcclxuXHJcbiAgICBsZXQgYWN0aXZlSXRlbT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGl0ZW1fY2xhc3MrJy5pcy1hY3RpdmUnKTtcclxuICAgIGxldCBjdXJJdGVtPWUudGFyZ2V0LmNsb3Nlc3QoaXRlbV9jbGFzcyk7XHJcbiAgICBsaXN0X2l0ZW0uZm9yRWFjaChpdGVtPT57XHJcbiAgICAgIGlmIChpdGVtPT1hY3RpdmVJdGVtKXtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIGlmIChleHBhbmRfY2xhc3M9PScuYWNjb3JkZW9uX19leHBhbmQnKXtcclxuICAgICAgICAgICQoaXRlbSkuZmluZChleHBhbmRfY2xhc3MpLndpZHRoKCcwcHgnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICQoaXRlbSkuZmluZChleHBhbmRfY2xhc3MpLmhlaWdodCgnMHB4Jyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfTtcclxuICAgICAgaWYgKGl0ZW09PWN1ckl0ZW0mJml0ZW0hPT1hY3RpdmVJdGVtKXtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIGlmIChleHBhbmRfY2xhc3M9PScuYWNjb3JkZW9uX19leHBhbmQnKXtcclxuICAgICAgICAgICQoaXRlbSkuZmluZChleHBhbmRfY2xhc3MpLndpZHRoKGNhbGNXaWR0aChpdGVtKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAkKGl0ZW0pLmZpbmQoZXhwYW5kX2NsYXNzKS5oZWlnaHQoY2FsY0hlaWdodChpdGVtKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5hZGRMc25VbCh0ZWFtX2FjY29yZCwnLnRlYW1fX2l0ZW0nLCcudGVhbV9fZXhwYW5kJyk7XHJcbmFkZExzblVsKG1lbnVfYWNjb3JkLCcuYWNjb3JkZW9uX19pdGVtJywnLmFjY29yZGVvbl9fZXhwYW5kJyk7XHJcblxyXG4vLyDQvNC+0LTRg9C70Ywgb3ZlcmxheVxyXG5jb25zdCBtb2RhbD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWwnKTtcclxuY29uc3QgbW9kYWxfaW5uZXI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsX2lubmVyJyk7XHJcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5VGVtcGxhdGVcIikuaW5uZXJIVE1MO1xyXG5jb25zdCByZXZpZXdfYnRucz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV2aWV3c19fYnRuJyk7XHJcbmNvbnN0IG92ZXJsYXkgPSBjcmVhdGVPdmVybGF5KHRlbXBsYXRlKTtcclxuLy8g0YPRgdGC0LDQvdC+0LLQutCwINC/0YDQvtGB0LvRg9GI0LjQstCw0YLQtdC70Y8g0LrQu9C40LrQvtCyINC90LAg0LrQvdC+0L/QutCw0YUg0L7RgtC30YvQstC+0LJcclxucmV2aWV3X2J0bnMuZm9yRWFjaChyZXZfYnRuID0+IHtcclxuICByZXZfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgbGV0IHJldl90ZXh0PXJldl9idG4ucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudDtcclxuICBsZXQgcmV2X3RpdHRsZT1yZXZfYnRuLnByZXZpb3VzRWxlbWVudFNpYmxpbmcucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudDtcclxuICBvdmVybGF5Lm9wZW4oKTtcclxuICBvdmVybGF5LnNldENvbnRlbnQocmV2X3RpdHRsZSxyZXZfdGV4dCk7XHJcbn0pO1xyXG59KTtcclxuLy/RhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC+0LLQtdGA0LvQtdGPXHJcbmZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXkodGVtcGxhdGUpIHtcclxuICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgZnJhZ21lbnQuaW5uZXJIVE1MID0gdGVtcGxhdGU7XHJcblxyXG4gIGNvbnN0IG92ZXJsYXlFbGVtZW50ID0gZnJhZ21lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG4gIGNvbnN0IGNvbnRlbnRUaXR0bGUgPSBmcmFnbWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdHRsZV9tb2RcIik7XHJcbiAgY29uc3QgY29udGVudFRleHQgPSBmcmFnbWVudC5xdWVyeVNlbGVjdG9yKFwiI3RleHRfbW9kXCIpO1xyXG4gIGNvbnN0IGNsb3NlQnRuID0gZnJhZ21lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZV9idG5cIik7XHJcbiAgXHJcbiAgZnJhZ21lbnQgPSBudWxsO1xyXG4vLyDRg9GB0YLQsNC90L7QstC60LAg0L/RgNC+0YHQu9GD0YjQuNCy0LDRgtC10LvRjyDQutC70LjQutC+0LIg0L3QsCDQutC90L7Qv9C60LUg0LfQsNC60YDRi9GC0LjRjyDQvtCy0LXRgNC70LXRj1xyXG5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBtb2RhbF9pbm5lci5yZW1vdmVDaGlsZChvdmVybGF5RWxlbWVudCk7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcbiAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2NrZWQnKTtcclxufSk7XHJcbmxldCBvcGVuPWZ1bmN0aW9uKCl7XHJcbiAgbW9kYWxfaW5uZXIuYXBwZW5kQ2hpbGQob3ZlcmxheUVsZW1lbnQpO1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gIGJvZHkuY2xhc3NMaXN0LmFkZCgnaXMtbG9ja2VkJyk7XHJcbn07XHJcbmxldCBjbG9zZT1mdW5jdGlvbigpe1xyXG4gIGNsb3NlQnRuLmNsaWNrO1xyXG59O1xyXG5sZXQgc2V0Q29udGVudD1mdW5jdGlvbih0aXR0bGVfbW9kLHRleHRfbW9kKXtcclxuICBjb250ZW50VGV4dC5pbm5lckhUTUwgPSB0ZXh0X21vZDtcclxuICBjb250ZW50VGl0dGxlLmlubmVySFRNTCA9IHRpdHRsZV9tb2Q7XHJcbn07XHJcbiAgcmV0dXJuIHtcclxuICAgIG9wZW4sXHJcbiAgICBjbG9zZSxcclxuICAgIHNldENvbnRlbnRcclxuICB9O1xyXG59O1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL2Zvcm0gZGF0YVxyXG5cclxubGV0IGZvcm1PcmRlcj1mdW5jdGlvbigpe1xyXG5jb25zdCBmb3JtX29yZGVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX29yZGVyJyk7XHJcblxyXG4gIGZvcm1fb3JkZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JyxmdW5jdGlvbihlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKSxcclxuICBcclxuICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICB4aHIucmVzcG9zZVR5cGU9J2pzb24nO1xyXG4gIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiKTtcclxuICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtUmVxdWVzdGVkLVdpdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcclxuXHJcbiAgZm9ybURhdGEuYXBwZW5kKCduYW1lJyxmb3JtX29yZGVyLmVsZW1lbnRzLmZpcnN0bmFtZS52YWx1ZSk7XHJcbiAgZm9ybURhdGEuYXBwZW5kKCdwaG9uZScsZm9ybV9vcmRlci5lbGVtZW50cy5waG9uZS52YWx1ZSk7XHJcbiAgZm9ybURhdGEuYXBwZW5kKCdjb21tZW50Jyxmb3JtX29yZGVyLmVsZW1lbnRzLmNvbW1lbnQudmFsdWUpO1xyXG4gIGZvcm1EYXRhLmFwcGVuZCgndG8nLCdteUB2YWxpZC5lbScpO1xyXG4gIFxyXG4gIHhoci5zZW5kKGZvcm1EYXRhKTtcclxuICB4aHIub25sb2FkICA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICBcclxuICAgIGlmICh4aHIuc3RhdHVzIT0yMDApe1xyXG4gICAgICBvdmVybGF5LnNldENvbnRlbnQoJ9Ce0YjQuNCx0LrQsCcsJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDQtNCw0L3QvdGL0YUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG92ZXJsYXkuc2V0Q29udGVudCgn0KHQvtC+0LHRidC10L3QuNC1Jyxqc29uUmVzcG9uc2UubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBvdmVybGF5Lm9wZW4oKTtcclxuIH07XHJcbn0pO1xyXG59O1xyXG5mb3JtT3JkZXIoKTtcclxuLy8g0L7RgtC+0LHRgNCw0LbQtdC90LjQtSDQuNC90LPRgNC40LTQuNC10L3RgtC+0LIg0L/QviBtb3VzZW92ZXIvbW91c2VvdXRcclxubGV0IG1vdXNlTW92ZT1mdW5jdGlvbigpe1xyXG5jb25zdCByZWNpcGVzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZWNpcGUnKTtcclxuXHJcbmZ1bmN0aW9uIHJlY2lwZU1vdXNlT3Zlcigpe1xyXG4gICQoJy5yZWNpcGVfX2Ryb3Bkb3duJykuY3NzKHsnbGVmdCc6JzEwMCUnLCdvcGFjaXR5JzoxfSk7XHJcbiAgJCgnLnJlY2lwZScpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJ3JnYmEoMjI3LCA4MCwgNDAsIDEpJyk7XHJcbn07XHJcbmZ1bmN0aW9uIHJlY2lwZU1vdXNlT3V0KCl7XHJcbiAgJCgnLnJlY2lwZV9fZHJvcGRvd24nKS5jc3MoeydsZWZ0JzonLTk5OTlweCcsJ29wYWNpdHknOjB9KTtcclxuICAkKCcucmVjaXBlJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywncmdiYSgyMjcsIDgwLCA0MCwgMC40KScpO1xyXG59O1xyXG5cclxucmVjaXBlcy5mb3JFYWNoKHJlY2lwZSA9PntcclxuICByZWNpcGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxmdW5jdGlvbihlKXtcclxuICAgIHJlY2lwZU1vdXNlT3ZlcigpO1xyXG4gIH0pO1xyXG4gIHJlY2lwZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsZnVuY3Rpb24oZSl7XHJcbiAgICByZWNpcGVNb3VzZU91dCgpO1xyXG4gIH0pO1xyXG59KTtcclxufTtcclxubW91c2VNb3ZlKCk7XHJcblxyXG4iXX0=
