/////////////////////////hamburger menu
const menu_btn = document.querySelector('#menu_btn'),
  ham_menu = document.querySelector('#ham_menu'),
  ham_list = document.querySelector('#ham_list'),
  body = document.querySelector('body');
//функция добавления/удаления активного класса меню и блокировка body
  function toggleMenu(){
    menu_btn.classList.toggle('is-active');
    ham_menu.classList.toggle('is-active');
    body.classList.toggle('is-locked');
  };
//обработчик клика на кнопке меню
menu_btn.addEventListener('click', function (e) {
  e.preventDefault();
  toggleMenu();
});
//обработчик клика на ссылках меню
ham_list.addEventListener('click', function (e) {
  let el=e.target;
  if (el.tagName=='A'){
    toggleMenu();
  };
});
/////////////////////////slider
const slide_next=document.querySelector('#slide-next'),
      slide_prev=document.querySelector('#slide-prev'),
      slide_list=document.querySelector('#slide-list'),
      style=getComputedStyle(slide_list),
      step=parseInt(getComputedStyle(slide_list.firstElementChild).width,10),
      list_width=parseInt(slide_list.children.length,10)*step;

// устанавливает right; a - текущее значение right, b - шаг сдвига 
function shift_right(a,b){
  slide_list.style.right=a+b+'px';
};
// получает текущее свойство right
function current_right(){
  let cur_right=parseInt(style.right,10);
  if (!cur_right) {
    cur_right=0;
  };
  return cur_right;
};
//обработчик клика по кнопке next
slide_next.addEventListener('click',function(e){
  e.preventDefault();
  let cur_right=current_right();
  if (cur_right<list_width-step){
    shift_right(cur_right,step);
  } 
  else {
    shift_right(0,0);
}
});
//обработчик клика по кнопке prev
slide_prev.addEventListener('click',function(e){
  e.preventDefault();
  let  cur_right=current_right();
  if (cur_right>0){
    shift_right(cur_right,-step);
  }
  else {
    shift_right(list_width,-step);
  };
});
/////////////////////////accordeon team & menu
const team_accord=document.querySelector("#team_accord"),
      menu_accord=document.querySelector("#menu_accord");
// вычисление высоты
function calcHeight(item){
  let pic_h=$(item).find('.team__pic').height();
  let desc_h=$(item).find('.team__desc').height();
  return pic_h+desc_h;
};
// вычисление ширины
function calcWidth(item){
  let win_w=$(window).width();
  let link_w=$(item).find('a').width();
  let calc_w=win_w-link_w*3;
  return calc_w > 550 ? 550 : calc_w;
};
// вешаем обработчик на ul
function addLsnUl(elem_ul,item_class,expand_class){
  elem_ul.addEventListener('click',function(e){
    e.preventDefault();
    const list_item=elem_ul.querySelectorAll(item_class);

    let activeItem=document.querySelector(item_class+'.is-active');
    let curItem=e.target.closest(item_class);
    list_item.forEach(item=>{
      if (item==activeItem){
        item.classList.remove('is-active');
        if (expand_class=='.accordeon__expand'){
          $(item).find(expand_class).width('0px');
        }else{
          $(item).find(expand_class).height('0px');
        };
      };
      if (item==curItem&&item!==activeItem){
        item.classList.add('is-active');
        if (expand_class=='.accordeon__expand'){
          $(item).find(expand_class).width(calcWidth(item));
        }
        else{
          $(item).find(expand_class).height(calcHeight(item));
        };
    };
  });
  });
};

addLsnUl(team_accord,'.team__item','.team__expand');
addLsnUl(menu_accord,'.accordeon__item','.accordeon__expand');

// модуль overlay
const modal=document.querySelector('#modal');
const modal_inner=document.querySelector('#modal_inner');
const template = document.querySelector("#overlayTemplate").innerHTML;
const review_btns=document.querySelectorAll('.reviews__btn');
const overlay = createOverlay(template);
// установка прослушивателя кликов на кнопках отзывов
review_btns.forEach(rev_btn => {
  rev_btn.addEventListener('click',function(e){
  e.preventDefault();
  let rev_text=rev_btn.previousElementSibling.textContent;
  let rev_tittle=rev_btn.previousElementSibling.previousElementSibling.textContent;
  overlay.open();
  overlay.setContent(rev_tittle,rev_text);
});
});
//функция создания оверлея
function createOverlay(template) {
  let fragment = document.createElement('div');

  fragment.innerHTML = template;

  const overlayElement = fragment.querySelector(".overlay");
  const contentTittle = fragment.querySelector("#tittle_mod");
  const contentText = fragment.querySelector("#text_mod");
  const closeBtn = fragment.querySelector("#close_btn");
  
  fragment = null;
// установка прослушивателя кликов на кнопке закрытия оверлея
  closeBtn.addEventListener("click", function(e) {
    e.preventDefault();
    modal_inner.removeChild(overlayElement);
    modal.classList.remove('is-active');
    body.classList.remove('is-locked');
  });

  return {
    open() {
      modal_inner.appendChild(overlayElement);
      modal.classList.add('is-active');
      body.classList.add('is-locked');
    },
    close() {
      closeBtn.click();
    },
    setContent(tittle_mod,text_mod) {
      contentText.innerHTML = text_mod;
      contentTittle.innerHTML = tittle_mod;
    }
  };
};

/////////////////////////form data
const form_order=document.querySelector('#form_order');

  form_order.addEventListener('submit',function(e){
  e.preventDefault();
  const formData = new FormData(),
  
  xhr = new XMLHttpRequest();
  xhr.resposeType='json';
  xhr.open("POST", "https://webdev-api.loftschool.com/sendmail");
  xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");

  formData.append('name',form_order.elements.firstname.value);
  formData.append('phone',form_order.elements.phone.value);
  formData.append('comment',form_order.elements.comment.value);
  formData.append('to','my@valid.em');
  
  xhr.send(formData);
  xhr.onload  = function() {
    let jsonResponse = JSON.parse(xhr.responseText);
    
    if (xhr.status!=200){
      overlay.setContent('Ошибка','Произошла ошибка отправки данных');
    } else {
      overlay.setContent('Сообщение',jsonResponse.message);
    }
    overlay.open();
 };
});
//yandex map
ymaps.ready(init);
var placemarks=[
  {
    latitude:59.97,
    longitude:30.31,
    hintContent:'<div class="map__hint">ул. Литераторов, д.19</div>',
    balloonContent:[
      '<div class="map__balloon">ул. Литераторов, д.19</div>',
      '<div>Санкт-Петербург, Россия</div>'
    ]
  },
  {
    latitude:59.94,
    longitude:30.25,
    hintContent:'<div class="map__hint">Малый проспект В.О., д.64</div>',
    balloonContent:[
      '<div class="map__balloon">Малый проспект В.О., д.64</div>',
      '<div>Санкт-Петербург, Россия</div>'
    ]
  },
  {
    latitude:59.93,
    longitude:30.34,
    hintContent:'<div class="map__hint">наб. реки Фонтанки, д.56</div>',
    balloonContent:[
      '<div class="map__balloon">наб. реки Фонтанки, д.56</div>',
      '<div>Санкт-Петербург, Россия</div>'
    ]
  },
  {
    latitude:59.984597,
    longitude:30.368939,
    hintContent:'<div class="map__hint">проспект маршала Блюхера 6</div>',
    balloonContent:[
      '<div class="map__balloon">проспект маршала Блюхера 6</div>',
      '<div>Санкт-Петербург, Россия</div>'
    ]
  }
];
  function init(){ 
    var map = new ymaps.Map("sec_map", {
      center: [59.94, 30.32],
      zoom: 12,
      controls:['zoomControl'],
      behaviors:['drag']
    }); 
placemarks.forEach(obj =>{
  var placemark=new ymaps.Placemark([obj.latitude,obj.longitude],{
    hintContent:obj.hintContent,
    balloonContent:obj.balloonContent.join('')
  },
  {
    iconLayout:'default#image',
    iconImageHref:'./img/icons/map-marker.svg',
    iconImageSize:[46,57],
    iconImageOffset:[-23,-57]
  })
  map.geoObjects.add(placemark);
});
}
//
myFullpage = new fullpage('#fullpage', {
  anchors: ['Page1', 'Page2', 'Page3','Page4','Page5','Page6','Page7','Page8','Page9'],
  autoScrolling: true,
	scrollHorizontally: true,
	licenseKey: 'OPEN-SOURCE-GPLV3-LICENSE',
  navigation: true,
  navigationPosition: 'right',
  scrollBar: true
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vaGFtYnVyZ2VyIG1lbnVcclxuY29uc3QgbWVudV9idG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVudV9idG4nKSxcclxuICBoYW1fbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoYW1fbWVudScpLFxyXG4gIGhhbV9saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hhbV9saXN0JyksXHJcbiAgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuLy/RhNGD0L3QutGG0LjRjyDQtNC+0LHQsNCy0LvQtdC90LjRjy/Rg9C00LDQu9C10L3QuNGPINCw0LrRgtC40LLQvdC+0LPQviDQutC70LDRgdGB0LAg0LzQtdC90Y4g0Lgg0LHQu9C+0LrQuNGA0L7QstC60LAgYm9keVxyXG4gIGZ1bmN0aW9uIHRvZ2dsZU1lbnUoKXtcclxuICAgIG1lbnVfYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgaGFtX21lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJyk7XHJcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2lzLWxvY2tlZCcpO1xyXG4gIH07XHJcbi8v0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQvdCwINC60L3QvtC/0LrQtSDQvNC10L3RjlxyXG5tZW51X2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHRvZ2dsZU1lbnUoKTtcclxufSk7XHJcbi8v0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQvdCwINGB0YHRi9C70LrQsNGFINC80LXQvdGOXHJcbmhhbV9saXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBsZXQgZWw9ZS50YXJnZXQ7XHJcbiAgaWYgKGVsLnRhZ05hbWU9PSdBJyl7XHJcbiAgICB0b2dnbGVNZW51KCk7XHJcbiAgfTtcclxufSk7XHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9zbGlkZXJcclxuY29uc3Qgc2xpZGVfbmV4dD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2xpZGUtbmV4dCcpLFxyXG4gICAgICBzbGlkZV9wcmV2PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZS1wcmV2JyksXHJcbiAgICAgIHNsaWRlX2xpc3Q9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NsaWRlLWxpc3QnKSxcclxuICAgICAgc3R5bGU9Z2V0Q29tcHV0ZWRTdHlsZShzbGlkZV9saXN0KSxcclxuICAgICAgc3RlcD1wYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHNsaWRlX2xpc3QuZmlyc3RFbGVtZW50Q2hpbGQpLndpZHRoLDEwKSxcclxuICAgICAgbGlzdF93aWR0aD1wYXJzZUludChzbGlkZV9saXN0LmNoaWxkcmVuLmxlbmd0aCwxMCkqc3RlcDtcclxuXHJcbi8vINGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCIHJpZ2h0OyBhIC0g0YLQtdC60YPRidC10LUg0LfQvdCw0YfQtdC90LjQtSByaWdodCwgYiAtINGI0LDQsyDRgdC00LLQuNCz0LAgXHJcbmZ1bmN0aW9uIHNoaWZ0X3JpZ2h0KGEsYil7XHJcbiAgc2xpZGVfbGlzdC5zdHlsZS5yaWdodD1hK2IrJ3B4JztcclxufTtcclxuLy8g0L/QvtC70YPRh9Cw0LXRgiDRgtC10LrRg9GJ0LXQtSDRgdCy0L7QudGB0YLQstC+IHJpZ2h0XHJcbmZ1bmN0aW9uIGN1cnJlbnRfcmlnaHQoKXtcclxuICBsZXQgY3VyX3JpZ2h0PXBhcnNlSW50KHN0eWxlLnJpZ2h0LDEwKTtcclxuICBpZiAoIWN1cl9yaWdodCkge1xyXG4gICAgY3VyX3JpZ2h0PTA7XHJcbiAgfTtcclxuICByZXR1cm4gY3VyX3JpZ2h0O1xyXG59O1xyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L/QviDQutC90L7Qv9C60LUgbmV4dFxyXG5zbGlkZV9uZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgbGV0IGN1cl9yaWdodD1jdXJyZW50X3JpZ2h0KCk7XHJcbiAgaWYgKGN1cl9yaWdodDxsaXN0X3dpZHRoLXN0ZXApe1xyXG4gICAgc2hpZnRfcmlnaHQoY3VyX3JpZ2h0LHN0ZXApO1xyXG4gIH0gXHJcbiAgZWxzZSB7XHJcbiAgICBzaGlmdF9yaWdodCgwLDApO1xyXG59XHJcbn0pO1xyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L/QviDQutC90L7Qv9C60LUgcHJldlxyXG5zbGlkZV9wcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgbGV0ICBjdXJfcmlnaHQ9Y3VycmVudF9yaWdodCgpO1xyXG4gIGlmIChjdXJfcmlnaHQ+MCl7XHJcbiAgICBzaGlmdF9yaWdodChjdXJfcmlnaHQsLXN0ZXApO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHNoaWZ0X3JpZ2h0KGxpc3Rfd2lkdGgsLXN0ZXApO1xyXG4gIH07XHJcbn0pO1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vYWNjb3JkZW9uIHRlYW0gJiBtZW51XHJcbmNvbnN0IHRlYW1fYWNjb3JkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVhbV9hY2NvcmRcIiksXHJcbiAgICAgIG1lbnVfYWNjb3JkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVudV9hY2NvcmRcIik7XHJcbi8vINCy0YvRh9C40YHQu9C10L3QuNC1INCy0YvRgdC+0YLRi1xyXG5mdW5jdGlvbiBjYWxjSGVpZ2h0KGl0ZW0pe1xyXG4gIGxldCBwaWNfaD0kKGl0ZW0pLmZpbmQoJy50ZWFtX19waWMnKS5oZWlnaHQoKTtcclxuICBsZXQgZGVzY19oPSQoaXRlbSkuZmluZCgnLnRlYW1fX2Rlc2MnKS5oZWlnaHQoKTtcclxuICByZXR1cm4gcGljX2grZGVzY19oO1xyXG59O1xyXG4vLyDQstGL0YfQuNGB0LvQtdC90LjQtSDRiNC40YDQuNC90YtcclxuZnVuY3Rpb24gY2FsY1dpZHRoKGl0ZW0pe1xyXG4gIGxldCB3aW5fdz0kKHdpbmRvdykud2lkdGgoKTtcclxuICBsZXQgbGlua193PSQoaXRlbSkuZmluZCgnYScpLndpZHRoKCk7XHJcbiAgbGV0IGNhbGNfdz13aW5fdy1saW5rX3cqMztcclxuICByZXR1cm4gY2FsY193ID4gNTUwID8gNTUwIDogY2FsY193O1xyXG59O1xyXG4vLyDQstC10YjQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsCB1bFxyXG5mdW5jdGlvbiBhZGRMc25VbChlbGVtX3VsLGl0ZW1fY2xhc3MsZXhwYW5kX2NsYXNzKXtcclxuICBlbGVtX3VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGxpc3RfaXRlbT1lbGVtX3VsLnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbV9jbGFzcyk7XHJcblxyXG4gICAgbGV0IGFjdGl2ZUl0ZW09ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpdGVtX2NsYXNzKycuaXMtYWN0aXZlJyk7XHJcbiAgICBsZXQgY3VySXRlbT1lLnRhcmdldC5jbG9zZXN0KGl0ZW1fY2xhc3MpO1xyXG4gICAgbGlzdF9pdGVtLmZvckVhY2goaXRlbT0+e1xyXG4gICAgICBpZiAoaXRlbT09YWN0aXZlSXRlbSl7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICBpZiAoZXhwYW5kX2NsYXNzPT0nLmFjY29yZGVvbl9fZXhwYW5kJyl7XHJcbiAgICAgICAgICAkKGl0ZW0pLmZpbmQoZXhwYW5kX2NsYXNzKS53aWR0aCgnMHB4Jyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAkKGl0ZW0pLmZpbmQoZXhwYW5kX2NsYXNzKS5oZWlnaHQoJzBweCcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChpdGVtPT1jdXJJdGVtJiZpdGVtIT09YWN0aXZlSXRlbSl7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICBpZiAoZXhwYW5kX2NsYXNzPT0nLmFjY29yZGVvbl9fZXhwYW5kJyl7XHJcbiAgICAgICAgICAkKGl0ZW0pLmZpbmQoZXhwYW5kX2NsYXNzKS53aWR0aChjYWxjV2lkdGgoaXRlbSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgJChpdGVtKS5maW5kKGV4cGFuZF9jbGFzcykuaGVpZ2h0KGNhbGNIZWlnaHQoaXRlbSkpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuYWRkTHNuVWwodGVhbV9hY2NvcmQsJy50ZWFtX19pdGVtJywnLnRlYW1fX2V4cGFuZCcpO1xyXG5hZGRMc25VbChtZW51X2FjY29yZCwnLmFjY29yZGVvbl9faXRlbScsJy5hY2NvcmRlb25fX2V4cGFuZCcpO1xyXG5cclxuLy8g0LzQvtC00YPQu9GMIG92ZXJsYXlcclxuY29uc3QgbW9kYWw9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsJyk7XHJcbmNvbnN0IG1vZGFsX2lubmVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbF9pbm5lcicpO1xyXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheVRlbXBsYXRlXCIpLmlubmVySFRNTDtcclxuY29uc3QgcmV2aWV3X2J0bnM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJldmlld3NfX2J0bicpO1xyXG5jb25zdCBvdmVybGF5ID0gY3JlYXRlT3ZlcmxheSh0ZW1wbGF0ZSk7XHJcbi8vINGD0YHRgtCw0L3QvtCy0LrQsCDQv9GA0L7RgdC70YPRiNC40LLQsNGC0LXQu9GPINC60LvQuNC60L7QsiDQvdCwINC60L3QvtC/0LrQsNGFINC+0YLQt9GL0LLQvtCyXHJcbnJldmlld19idG5zLmZvckVhY2gocmV2X2J0biA9PiB7XHJcbiAgcmV2X2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGxldCByZXZfdGV4dD1yZXZfYnRuLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQ7XHJcbiAgbGV0IHJldl90aXR0bGU9cmV2X2J0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQ7XHJcbiAgb3ZlcmxheS5vcGVuKCk7XHJcbiAgb3ZlcmxheS5zZXRDb250ZW50KHJldl90aXR0bGUscmV2X3RleHQpO1xyXG59KTtcclxufSk7XHJcbi8v0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQvtCy0LXRgNC70LXRj1xyXG5mdW5jdGlvbiBjcmVhdGVPdmVybGF5KHRlbXBsYXRlKSB7XHJcbiAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gIGZyYWdtZW50LmlubmVySFRNTCA9IHRlbXBsYXRlO1xyXG5cclxuICBjb25zdCBvdmVybGF5RWxlbWVudCA9IGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuICBjb25zdCBjb250ZW50VGl0dGxlID0gZnJhZ21lbnQucXVlcnlTZWxlY3RvcihcIiN0aXR0bGVfbW9kXCIpO1xyXG4gIGNvbnN0IGNvbnRlbnRUZXh0ID0gZnJhZ21lbnQucXVlcnlTZWxlY3RvcihcIiN0ZXh0X21vZFwiKTtcclxuICBjb25zdCBjbG9zZUJ0biA9IGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2VfYnRuXCIpO1xyXG4gIFxyXG4gIGZyYWdtZW50ID0gbnVsbDtcclxuLy8g0YPRgdGC0LDQvdC+0LLQutCwINC/0YDQvtGB0LvRg9GI0LjQstCw0YLQtdC70Y8g0LrQu9C40LrQvtCyINC90LAg0LrQvdC+0L/QutC1INC30LDQutGA0YvRgtC40Y8g0L7QstC10YDQu9C10Y9cclxuICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbW9kYWxfaW5uZXIucmVtb3ZlQ2hpbGQob3ZlcmxheUVsZW1lbnQpO1xyXG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvY2tlZCcpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgb3BlbigpIHtcclxuICAgICAgbW9kYWxfaW5uZXIuYXBwZW5kQ2hpbGQob3ZlcmxheUVsZW1lbnQpO1xyXG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcclxuICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdpcy1sb2NrZWQnKTtcclxuICAgIH0sXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgY2xvc2VCdG4uY2xpY2soKTtcclxuICAgIH0sXHJcbiAgICBzZXRDb250ZW50KHRpdHRsZV9tb2QsdGV4dF9tb2QpIHtcclxuICAgICAgY29udGVudFRleHQuaW5uZXJIVE1MID0gdGV4dF9tb2Q7XHJcbiAgICAgIGNvbnRlbnRUaXR0bGUuaW5uZXJIVE1MID0gdGl0dGxlX21vZDtcclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL2Zvcm0gZGF0YVxyXG5jb25zdCBmb3JtX29yZGVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX29yZGVyJyk7XHJcblxyXG4gIGZvcm1fb3JkZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JyxmdW5jdGlvbihlKXtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKSxcclxuICBcclxuICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICB4aHIucmVzcG9zZVR5cGU9J2pzb24nO1xyXG4gIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiKTtcclxuICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtUmVxdWVzdGVkLVdpdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcclxuXHJcbiAgZm9ybURhdGEuYXBwZW5kKCduYW1lJyxmb3JtX29yZGVyLmVsZW1lbnRzLmZpcnN0bmFtZS52YWx1ZSk7XHJcbiAgZm9ybURhdGEuYXBwZW5kKCdwaG9uZScsZm9ybV9vcmRlci5lbGVtZW50cy5waG9uZS52YWx1ZSk7XHJcbiAgZm9ybURhdGEuYXBwZW5kKCdjb21tZW50Jyxmb3JtX29yZGVyLmVsZW1lbnRzLmNvbW1lbnQudmFsdWUpO1xyXG4gIGZvcm1EYXRhLmFwcGVuZCgndG8nLCdteUB2YWxpZC5lbScpO1xyXG4gIFxyXG4gIHhoci5zZW5kKGZvcm1EYXRhKTtcclxuICB4aHIub25sb2FkICA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICBcclxuICAgIGlmICh4aHIuc3RhdHVzIT0yMDApe1xyXG4gICAgICBvdmVybGF5LnNldENvbnRlbnQoJ9Ce0YjQuNCx0LrQsCcsJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDQtNCw0L3QvdGL0YUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG92ZXJsYXkuc2V0Q29udGVudCgn0KHQvtC+0LHRidC10L3QuNC1Jyxqc29uUmVzcG9uc2UubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBvdmVybGF5Lm9wZW4oKTtcclxuIH07XHJcbn0pO1xyXG4vL3lhbmRleCBtYXBcclxueW1hcHMucmVhZHkoaW5pdCk7XHJcbnZhciBwbGFjZW1hcmtzPVtcclxuICB7XHJcbiAgICBsYXRpdHVkZTo1OS45NyxcclxuICAgIGxvbmdpdHVkZTozMC4zMSxcclxuICAgIGhpbnRDb250ZW50Oic8ZGl2IGNsYXNzPVwibWFwX19oaW50XCI+0YPQuy4g0JvQuNGC0LXRgNCw0YLQvtGA0L7Qsiwg0LQuMTk8L2Rpdj4nLFxyXG4gICAgYmFsbG9vbkNvbnRlbnQ6W1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm1hcF9fYmFsbG9vblwiPtGD0LsuINCb0LjRgtC10YDQsNGC0L7RgNC+0LIsINC0LjE5PC9kaXY+JyxcclxuICAgICAgJzxkaXY+0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LMsINCg0L7RgdGB0LjRjzwvZGl2PidcclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGxhdGl0dWRlOjU5Ljk0LFxyXG4gICAgbG9uZ2l0dWRlOjMwLjI1LFxyXG4gICAgaGludENvbnRlbnQ6JzxkaXYgY2xhc3M9XCJtYXBfX2hpbnRcIj7QnNCw0LvRi9C5INC/0YDQvtGB0L/QtdC60YIg0JIu0J4uLCDQtC42NDwvZGl2PicsXHJcbiAgICBiYWxsb29uQ29udGVudDpbXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwibWFwX19iYWxsb29uXCI+0JzQsNC70YvQuSDQv9GA0L7RgdC/0LXQutGCINCSLtCeLiwg0LQuNjQ8L2Rpdj4nLFxyXG4gICAgICAnPGRpdj7QodCw0L3QutGCLdCf0LXRgtC10YDQsdGD0YDQsywg0KDQvtGB0YHQuNGPPC9kaXY+J1xyXG4gICAgXVxyXG4gIH0sXHJcbiAge1xyXG4gICAgbGF0aXR1ZGU6NTkuOTMsXHJcbiAgICBsb25naXR1ZGU6MzAuMzQsXHJcbiAgICBoaW50Q29udGVudDonPGRpdiBjbGFzcz1cIm1hcF9faGludFwiPtC90LDQsS4g0YDQtdC60Lgg0KTQvtC90YLQsNC90LrQuCwg0LQuNTY8L2Rpdj4nLFxyXG4gICAgYmFsbG9vbkNvbnRlbnQ6W1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm1hcF9fYmFsbG9vblwiPtC90LDQsS4g0YDQtdC60Lgg0KTQvtC90YLQsNC90LrQuCwg0LQuNTY8L2Rpdj4nLFxyXG4gICAgICAnPGRpdj7QodCw0L3QutGCLdCf0LXRgtC10YDQsdGD0YDQsywg0KDQvtGB0YHQuNGPPC9kaXY+J1xyXG4gICAgXVxyXG4gIH0sXHJcbiAge1xyXG4gICAgbGF0aXR1ZGU6NTkuOTg0NTk3LFxyXG4gICAgbG9uZ2l0dWRlOjMwLjM2ODkzOSxcclxuICAgIGhpbnRDb250ZW50Oic8ZGl2IGNsYXNzPVwibWFwX19oaW50XCI+0L/RgNC+0YHQv9C10LrRgiDQvNCw0YDRiNCw0LvQsCDQkdC70Y7RhdC10YDQsCA2PC9kaXY+JyxcclxuICAgIGJhbGxvb25Db250ZW50OltcclxuICAgICAgJzxkaXYgY2xhc3M9XCJtYXBfX2JhbGxvb25cIj7Qv9GA0L7RgdC/0LXQutGCINC80LDRgNGI0LDQu9CwINCR0LvRjtGF0LXRgNCwIDY8L2Rpdj4nLFxyXG4gICAgICAnPGRpdj7QodCw0L3QutGCLdCf0LXRgtC10YDQsdGD0YDQsywg0KDQvtGB0YHQuNGPPC9kaXY+J1xyXG4gICAgXVxyXG4gIH1cclxuXTtcclxuICBmdW5jdGlvbiBpbml0KCl7IFxyXG4gICAgdmFyIG1hcCA9IG5ldyB5bWFwcy5NYXAoXCJzZWNfbWFwXCIsIHtcclxuICAgICAgY2VudGVyOiBbNTkuOTQsIDMwLjMyXSxcclxuICAgICAgem9vbTogMTIsXHJcbiAgICAgIGNvbnRyb2xzOlsnem9vbUNvbnRyb2wnXSxcclxuICAgICAgYmVoYXZpb3JzOlsnZHJhZyddXHJcbiAgICB9KTsgXHJcbnBsYWNlbWFya3MuZm9yRWFjaChvYmogPT57XHJcbiAgdmFyIHBsYWNlbWFyaz1uZXcgeW1hcHMuUGxhY2VtYXJrKFtvYmoubGF0aXR1ZGUsb2JqLmxvbmdpdHVkZV0se1xyXG4gICAgaGludENvbnRlbnQ6b2JqLmhpbnRDb250ZW50LFxyXG4gICAgYmFsbG9vbkNvbnRlbnQ6b2JqLmJhbGxvb25Db250ZW50LmpvaW4oJycpXHJcbiAgfSxcclxuICB7XHJcbiAgICBpY29uTGF5b3V0OidkZWZhdWx0I2ltYWdlJyxcclxuICAgIGljb25JbWFnZUhyZWY6Jy4vaW1nL2ljb25zL21hcC1tYXJrZXIuc3ZnJyxcclxuICAgIGljb25JbWFnZVNpemU6WzQ2LDU3XSxcclxuICAgIGljb25JbWFnZU9mZnNldDpbLTIzLC01N11cclxuICB9KVxyXG4gIG1hcC5nZW9PYmplY3RzLmFkZChwbGFjZW1hcmspO1xyXG59KTtcclxufVxyXG4vL1xyXG5teUZ1bGxwYWdlID0gbmV3IGZ1bGxwYWdlKCcjZnVsbHBhZ2UnLCB7XHJcbiAgYW5jaG9yczogWydQYWdlMScsICdQYWdlMicsICdQYWdlMycsJ1BhZ2U0JywnUGFnZTUnLCdQYWdlNicsJ1BhZ2U3JywnUGFnZTgnLCdQYWdlOSddLFxyXG4gIGF1dG9TY3JvbGxpbmc6IHRydWUsXHJcblx0c2Nyb2xsSG9yaXpvbnRhbGx5OiB0cnVlLFxyXG5cdGxpY2Vuc2VLZXk6ICdPUEVOLVNPVVJDRS1HUExWMy1MSUNFTlNFJyxcclxuICBuYXZpZ2F0aW9uOiB0cnVlLFxyXG4gIG5hdmlnYXRpb25Qb3NpdGlvbjogJ3JpZ2h0JyxcclxuICBzY3JvbGxCYXI6IHRydWVcclxufSk7Il19
